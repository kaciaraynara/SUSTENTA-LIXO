<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sustenta CE (Mobile)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <!-- Firebase e JS -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInWithCustomToken, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, addDoc, onSnapshot, collection, query, where, Timestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        const apiKey = ""; 

        let db, auth;
        let currentUserId = null;
        let dbInitialized = false;
        const screens = {};
        const navButtons = {};

        // --- FUN√á√ïES GLOBAIS ---
        window.improveDescription = async function() {
            const descInput = document.getElementById('relato-descricao');
            const currentText = descInput.value;
            const btnAI = document.getElementById('btn-ai-improve');

            if (!currentText || currentText.length < 5) { showToast("Digite pelo menos um pouco sobre o problema.", true); return; }
            btnAI.disabled = true;
            btnAI.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Melhorando...';

            try {
                const prompt = `Aja como um assistente de saneamento urbano. Melhore e torne mais t√©cnica a seguinte descri√ß√£o de um problema de lixo urbano feita por um cidad√£o, mantendo o sentido original mas deixando mais claro para a prefeitura: "${currentText}". Responda apenas com o texto melhorado.`;

                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });

                if (!response.ok) throw new Error('Falha na API Gemini');
                const data = await response.json();
                const improvedText = data.candidates[0].content.parts[0].text;

                descInput.value = improvedText;
                showToast("Descri√ß√£o melhorada com IA! ‚ú®", false);
            } catch (error) {
                console.error("Erro na IA:", error); showToast("Erro ao conectar com a IA.", true);
            } finally {
                btnAI.disabled = false; btnAI.innerHTML = '‚ú® Melhorar com IA';
            }
        }

        window.logOut = async function() {
            if (!auth) return;
            try {
                await signOut(auth);
                currentUserId = null;
                dbInitialized = false;
                showScreen('login');
            } catch (error) { console.error("Erro ao deslogar:", error); }
        }
        
        window.showScreen = function(screenId) {
            // L√≥gica para carregar o mapa ao mudar para a tela mapa
            if (screenId === 'mapa') loadMapData();

            Object.values(screens).forEach(screen => { if(screen) screen.classList.add('hidden'); });
            if (screens[screenId]) screens[screenId].classList.remove('hidden');
            Object.values(navButtons).forEach(button => {
                if(button) { button.classList.remove('text-red-600', 'font-bold'); button.classList.add('text-gray-400'); }
            });
            if (navButtons[screenId]) {
                navButtons[screenId].classList.remove('text-gray-400'); navButtons[screenId].classList.add('text-red-600', 'font-bold');
            }
        }

        window.getLocation = function() {
            if ("geolocation" in navigator) {
                const btnGeo = document.getElementById('btn-geo');
                btnGeo.disabled = true;
                btnGeo.innerHTML = '<span class="animate-pulse">Buscando GPS...</span>'; 
                navigator.geolocation.getCurrentPosition((position) => {
                    document.getElementById('relato-latitude').value = position.coords.latitude;
                    document.getElementById('relato-longitude').value = position.coords.longitude;
                    btnGeo.disabled = false;
                    btnGeo.innerHTML = 'üìç Localiza√ß√£o Obtida!';
                    btnGeo.classList.remove('bg-white', 'text-gray-700'); btnGeo.classList.add('bg-green-100', 'text-green-700');
                    showToast("Localiza√ß√£o obtida!", false);
                }, (error) => {
                    showToast("N√£o foi poss√≠vel obter a localiza√ß√£o.", true);
                    btnGeo.disabled = false; btnGeo.innerHTML = 'Tentar Novamente';
                });
            } else { showToast("Geolocaliza√ß√£o n√£o suportada.", true); }
        }

        // Fun√ß√£o de Envio de Relato (Chamada pelo Event Listener)
        window.submitRelato = async function(e) {
            e.preventDefault();
            const desc = document.getElementById('relato-descricao').value;
            const lat = parseFloat(document.getElementById('relato-latitude').value);
            const lon = parseFloat(document.getElementById('relato-longitude').value);
            
            if (!dbInitialized || !currentUserId) { showToast("Voc√™ n√£o est√° autenticado. Tente novamente.", true); return; }
            if (!desc || !lat || !lon) { showToast("Localiza√ß√£o e descri√ß√£o s√£o obrigat√≥rios.", true); return; }
            
            // FIX: Usa a cole√ß√£o de dados P√öBLICOS para escrita
            const relatosCollection = collection(db, "artifacts", appId, "public", "data", "relatos");
            try {
                await addDoc(relatosCollection, {
                    descricao: desc, latitude: lat, longitude: lon, status: "Pendente", userId: currentUserId, timestamp: Timestamp.now()
                });
                showToast("Relato enviado com sucesso!", false);
                document.getElementById('form-relato').reset();
                showScreen('meus-relatos');
            } catch (error) {
                console.error("Erro ao salvar:", error); showToast("Erro ao enviar relato.", true);
            }
        }
        
        // --- FUN√á√ïES DE INICIALIZA√á√ÉO FIREBASE ---

        async function initializeFirebase() {
            try {
                if (firebaseConfig && Object.keys(firebaseConfig).length > 0) {
                    const app = initializeApp(firebaseConfig); db = getFirestore(app); auth = getAuth(app); setLogLevel('debug'); await setupAuthListener();
                } else { console.error("Configura√ß√£o do Firebase n√£o encontrada. Usando dados mockados."); loadMockData(); }
            } catch (error) { showToast("Erro de Conex√£o.", true); loadMockData(); }
        }

        async function setupAuthListener() {
            if (!auth) return;
            onAuthStateChanged(auth, (user) => {
                if (user) { 
                    currentUserId = user.uid; 
                    dbInitialized = true; 
                    showScreen('mapa'); 
                    loadRelatos();
                    loadMapData(); // Chama para carregar dados do mapa
                    document.getElementById('user-uid-display').innerText = currentUserId.substring(0, 10) + '...';
                } else { 
                    currentUserId = null; 
                    dbInitialized = false; 
                    signIn(); 
                }
            });
        }

        async function signIn() {
            if (!auth) return;
            try {
                if (initialAuthToken) await signInWithCustomToken(auth, initialAuthToken);
                else showToast("Token de autentica√ß√£o n√£o encontrado.", true);
            } catch (error) { showToast("Erro de autentica√ß√£o.", true); }
        }

        // FUN√á√ÉO FIXADA: Carregar apenas os relatos do usu√°rio logado (evitando permission-denied)
        function loadRelatos() {
            if (!dbInitialized || !currentUserId) { return; }

            // Consulta que OBEDECE a regra de seguran√ßa: buscar apenas pelos dados do pr√≥prio usu√°rio
            const relatosCollection = collection(db, "artifacts", appId, "public", "data", "relatos");
            const q = query(relatosCollection, where("userId", "==", currentUserId));

            onSnapshot(q, (snapshot) => {
                const relatosList = document.getElementById('relatos-list-meus');
                if(relatosList) {
                    relatosList.innerHTML = ''; 
                    if (snapshot.empty) { relatosList.innerHTML = '<p class="text-gray-500 text-center mt-4">Voc√™ ainda n√£o fez nenhum relato.</p>'; return; }
                    snapshot.forEach((doc) => {
                        const relato = doc.data();
                        const el = document.createElement('div');
                        let statusColor = "bg-yellow-100 text-yellow-800";
                        let borderColor = "border-yellow-400";
                        if (relato.status === "Em Andamento") { statusColor = "bg-blue-100 text-blue-800"; borderColor = "border-blue-400"; }
                        if (relato.status === "Concluido") { statusColor = "bg-green-100 text-green-800"; borderColor = "border-green-400"; }
                        el.className = `bg-white p-4 rounded-xl shadow mb-4 border-l-4 ${borderColor}`;
                        const date = relato.timestamp ? new Date(relato.timestamp.seconds * 1000).toLocaleDateString() : '-';
                        el.innerHTML = `<div class="flex items-center justify-between mb-2"><span class="text-xs text-gray-400">${date}</span><span class="status-badge ${statusColor} px-2 py-1 rounded text-xs font-bold">${relato.status}</span></div><h3 class="font-semibold text-gray-800 text-lg line-clamp-2">${relato.descricao}</h3><p class="text-sm text-gray-500 mt-1">Lat: ${relato.latitude?.toFixed(4)}, Lon: ${relato.longitude?.toFixed(4)}</p>`;
                        relatosList.appendChild(el);
                    });
                }
            }, (error) => {
                if (error.code === 'permission-denied') { document.getElementById('relatos-list-meus').innerHTML = '<p class="text-center text-red-500 mt-4">Erro de Permiss√£o: Regras de seguran√ßa bloqueadas.</p>'; }
            });
        }
        
        // Carrega dados para a tela de mapa (todos os relatos p√∫blicos)
        function loadMapData() {
             if (!dbInitialized) return;
             const relatosCollection = collection(db, "artifacts", appId, "public", "data", "relatos");
             onSnapshot(relatosCollection, (snapshot) => {
                 const mapOverlay = document.getElementById('map-overlay-count');
                 if(mapOverlay) mapOverlay.innerText = `Total: ${snapshot.size} Ocorr√™ncias`;
             }, (error) => {
                 // Trata o erro de permiss√£o no mapa de forma isolada
                 if (error.code === 'permission-denied') {
                     document.getElementById('map-overlay-count').innerText = "Erro de Permiss√£o: Mapa de terceiros bloqueado.";
                 }
             });
        }


        function showToast(message, isError = false) {
            const toast = document.getElementById('toast-notification');
            if(!toast) return;
            toast.textContent = message;
            if (isError) toast.className = 'fixed top-5 left-1/2 -translate-x-1/2 bg-red-600 text-white px-6 py-3 rounded-full shadow-lg transition-all duration-300 z-50 font-bold';
            else toast.className = 'fixed top-5 left-1/2 -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-full shadow-lg transition-all duration-300 z-50 font-bold';
            toast.classList.remove('hidden');
            setTimeout(() => { toast.classList.add('hidden'); }, 3000);
        }

        function loadMockData() {
            const relatosList = document.getElementById('relatos-list-meus');
            if(relatosList) {
                relatosList.innerHTML = `<div class="bg-white p-4 rounded-xl shadow mb-4 border-l-4 border-yellow-400"><div class="flex items-center justify-between mb-2"><span class="text-xs text-gray-400">10/10/2025</span><span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs font-bold">Pendente (Mock)</span></div><h3 class="font-semibold text-gray-800 text-lg">Erro de conex√£o. Estes s√£o dados de exemplo.</h3></div>`;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Mapeamento de Telas
            screens['login'] = document.getElementById('screen-login');
            screens['mapa'] = document.getElementById('screen-mapa');
            screens['relatar'] = document.getElementById('screen-relatar');
            screens['meus-relatos'] = document.getElementById('screen-meus-relatos');
            screens['perfil'] = document.getElementById('screen-perfil');
            screens['intro'] = document.getElementById('screen-intro'); // Nova tela intro

            // Mapeamento de Bot√µes
            navButtons['mapa'] = document.getElementById('nav-mapa');
            navButtons['relatar'] = document.getElementById('nav-relatar');
            navButtons['meus-relatos'] = document.getElementById('nav-meus-relatos');
            navButtons['perfil'] = document.getElementById('nav-perfil');

            // Listeners de Navega√ß√£o
            Object.keys(navButtons).forEach(key => {
                if (navButtons[key]) navButtons[key].addEventListener('click', () => window.showScreen(key));
            });

            // Adicionando listeners globais
            if (document.getElementById('btn-logout')) document.getElementById('btn-logout').addEventListener('click', window.logOut);
            if (document.getElementById('btn-geo')) document.getElementById('btn-geo').addEventListener('click', window.getLocation);
            if (document.getElementById('btn-ai-improve')) document.getElementById('btn-ai-improve').addEventListener('click', window.improveDescription);
            if (document.getElementById('form-relato')) document.getElementById('form-relato').addEventListener('submit', window.submitRelato);
            if (document.getElementById('btn-iniciar')) document.getElementById('btn-iniciar').addEventListener('click', () => { showScreen('login'); initializeFirebase(); });
            
            // Inicia na tela de introdu√ß√£o
            showScreen('intro');
        });
    </script>
    <style>
        .mobile-frame { width: 100%; max-width: 420px; height: 100vh; display: flex; flex-direction: column; background-color: #f3f4f6; overflow: hidden; margin: 0 auto; position: relative; }
        .main-content { flex-grow: 1; overflow-y: auto; position: relative; }
        .nav-bar { flex-shrink: 0; display: flex; justify-content: space-around; background-color: white; border-top: 1px solid #e5e7eb; padding: 0.5rem 0; height: 70px; }
        .nav-item { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 2px; font-size: 0.7rem; color: #9ca3af; transition: color 0.2s ease; width: 25%; }
        .nav-item svg { width: 1.5rem; height: 1.5rem; }
        .main-content::-webkit-scrollbar { display: none; }
        .main-content { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-gray-800 flex justify-center items-center h-screen m-0">

    <div class="mobile-frame shadow-2xl bg-gray-50">
        
        <!-- TELA INTRODU√á√ÉO/PASSO A PASSO -->
        <div id="screen-intro" class="absolute inset-0 z-50 bg-red-600 flex flex-col p-8 text-white">
            <div class="text-center mt-12 mb-8">
                <span class="text-6xl">‚ôªÔ∏è</span>
                <h1 class="text-3xl font-black mt-4">Bem-vindo ao Sustenta CE</h1>
            </div>
            <p class="text-lg font-light mb-8 text-center">Sua ferramenta para transformar Fortaleza.</p>
            
            <div class="space-y-6 flex-1 overflow-y-auto pb-4">
                <div class="flex gap-4 items-start bg-white/20 p-3 rounded-lg">
                    <span class="text-3xl font-bold">1</span>
                    <div>
                        <p class="font-bold text-lg">O que √©?</p>
                        <p class="text-sm">Um sistema colaborativo para voc√™ reportar o lixo. Seu relato vai direto para a prefeitura.</p>
                    </div>
                </div>
                <div class="flex gap-4 items-start bg-white/20 p-3 rounded-lg">
                    <span class="text-3xl font-bold">2</span>
                    <div>
                        <p class="font-bold text-lg">Como usar?</p>
                        <p class="text-sm">V√° em "Relatar", descreva o problema, clique no bot√£o para pegar seu GPS e envie. Simples assim!</p>
                    </div>
                </div>
                <div class="flex gap-4 items-start bg-white/20 p-3 rounded-lg">
                    <span class="text-3xl font-bold">3</span>
                    <div>
                        <p class="font-bold text-lg">O que acontece depois?</p>
                        <p class="text-sm">O gestor da prefeitura recebe a notifica√ß√£o e muda o status. Voc√™ pode acompanhar em "Hist√≥rico".</p>
                    </div>
                </div>
            </div>

            <button id="btn-iniciar" class="w-full bg-white text-red-600 font-bold py-4 rounded-xl shadow-lg mt-6 hover:bg-gray-100 transition">
                INICIAR E ENTRAR NO APP
            </button>
        </div>


        <!-- TELA LOGIN (Espera de Autentica√ß√£o) -->
        <div id="screen-login" class="absolute inset-0 z-40 bg-white flex flex-col justify-center items-center p-8 text-center hidden">
            <div class="mb-6">
                <span class="text-6xl">üîó</span>
            </div>
            <h1 class="text-xl font-bold text-gray-800 mb-2">Conectando ao Sistema...</h1>
            <p class="text-sm text-gray-600 mb-12">Autentizando seu usu√°rio via Canvas.</p>
            <div class="bg-gray-50 p-4 rounded-lg border border-gray-100 w-full max-w-xs mb-8">
                <p class="text-sm text-red-600 mb-2">Aguarde a autentica√ß√£o...</p>
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"></div>
            </div>
        </div>

        <!-- Tela do Mapa -->
        <div id="screen-mapa" class="main-content p-0 flex-col hidden bg-gray-100">
            <div class="bg-red-600 text-white p-4 shadow-md">
                <h2 class="text-lg font-bold">Mapa de Ocorr√™ncias</h2>
            </div>
            
            <div class="flex-grow relative h-full">
                <!-- Simula√ß√£o visual do mapa -->
                <div class="absolute inset-0 bg-gray-300 flex items-center justify-center bg-[url('https://img.freepik.com/free-vector/city-map-navigation-gps-pins_1017-6537.jpg?w=740&t=st=1708300000~exp=1708300600~hmac=exemplo')] bg-cover bg-center opacity-50">
                    <span class="bg-white/80 px-4 py-2 rounded shadow text-gray-600 font-bold">üìç Mapa Interativo</span>
                </div>
                
                <div class="absolute top-4 left-4 right-4 bg-red-600/90 text-white p-3 rounded-lg shadow-lg text-center backdrop-blur-sm">
                    <p class="text-lg font-bold">Resumo da √Årea</p>
                    <p id="map-overlay-count" class="text-sm">Carregando total...</p>
                </div>

                <div class="absolute bottom-4 left-4 right-4 bg-white/90 p-3 rounded-lg shadow-lg grid grid-cols-3 gap-2 text-center text-xs backdrop-blur-sm">
                    <div class="bg-yellow-100 p-1 rounded text-yellow-800 font-bold border border-yellow-200">Pendente</div>
                    <div class="bg-blue-100 p-1 rounded text-blue-800 font-bold border border-blue-200">Andamento</div>
                    <div class="bg-green-100 p-1 rounded text-green-800 font-bold border border-green-200">Resolvido</div>
                </div>
            </div>
        </div>
        
        <!-- Tela de Relatar Lixo -->
        <div id="screen-relatar" class="main-content p-6 flex-col hidden bg-white">
            <h2 class="text-2xl font-bold mb-6 text-gray-800 mt-4">Novo Relato</h2>
            
            <div class="bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl h-32 flex flex-col items-center justify-center text-gray-400 mb-6">
                <span class="text-2xl">üì∑</span>
                <span class="text-sm">Adicionar Foto (Opcional)</span>
            </div>

            <form id="form-relato" onsubmit="window.submitRelato(event)" class="flex flex-col gap-5">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">Descri√ß√£o do Problema</label>
                    <textarea id="relato-descricao" placeholder="Ex: Lixo na esquina da Rua A e B" rows="4" class="w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-red-500 focus:ring-1 focus:ring-red-500 outline-none transition-all duration-200 resize-none bg-gray-50" required></textarea>
                    <!-- Bot√£o de IA -->
                    <button type="button" id="btn-ai-improve" onclick="window.improveDescription()" class="mt-2 text-xs bg-gradient-to-r from-purple-500 to-indigo-500 text-white px-3 py-1.5 rounded-full shadow hover:from-purple-600 hover:to-indigo-600 transition flex items-center gap-1 w-max">
                        <span>‚ú®</span> Melhorar com IA
                    </button>
                </div>
                
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">Localiza√ß√£o</label>
                    <div class="flex gap-2 mb-3">
                        <input type="number" id="relato-latitude" placeholder="Latitude" class="w-full px-4 py-3 rounded-lg border border-gray-200 bg-gray-100 text-gray-500 text-sm" readonly required step="any">
                        <input type="number" id="relato-longitude" placeholder="Longitude" class="w-full px-4 py-3 rounded-lg border border-gray-200 bg-gray-100 text-gray-500 text-sm" readonly required step="any">
                    </div>
                    <button type="button" id="btn-geo" onclick="window.getLocation()" class="w-full bg-white border border-gray-300 text-gray-700 font-semibold py-3 px-4 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center gap-2 shadow-sm">
                        üìç Obter Localiza√ß√£o Atual
                    </button>
                </div>
                
                <button type="submit" class="w-full bg-red-600 text-white font-bold py-4 px-4 rounded-xl hover:bg-red-700 transition-colors shadow-lg mt-4 active:scale-95 transform duration-150">ENVIAR RELATO</button>
            </form>
        </div>

        <!-- Tela Meus Relatos -->
        <div id="screen-meus-relatos" class="main-content p-4 flex-col hidden overflow-y-auto bg-gray-50">
            <h2 class="text-2xl font-bold mb-4 text-gray-800 mt-4 ml-2">Hist√≥rico</h2>
            <div id="relatos-list-meus" class="space-y-4 pb-4">
                <div class="text-center text-gray-400 mt-10">Carregando...</div>
            </div>
        </div>
        
        <!-- Tela de Perfil -->
        <div id="screen-perfil" class="main-content p-6 flex-col items-center text-center hidden bg-white">
            <h2 class="text-2xl font-bold mb-8 text-gray-800 mt-4">Meu Perfil</h2>
            
            <div class="w-28 h-28 rounded-full bg-gray-100 mb-6 flex items-center justify-center text-gray-400 text-6xl">üë§</div>
            
            <div class="w-full bg-gray-50 rounded-xl p-6 mb-8 text-left border border-gray-100">
                <p class="text-xs text-gray-400 uppercase font-bold mb-1">Status da Conta</p>
                <p class="text-gray-800 font-medium flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-green-500"></span> Usu√°rio Autenticado
                </p>
                <p class="text-xs text-gray-400 mt-3 mb-1">Seu ID de Usu√°rio:</p>
                 <p class="text-sm text-gray-700 font-mono break-all" id="user-uid-display">Carregando...</p>
            </div>

            <button id="btn-logout" onclick="window.logOut()" class="w-full max-w-xs bg-white border border-red-200 text-red-600 font-bold p-3 rounded-xl shadow-sm hover:bg-red-50 transition-colors flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                </svg>
                Sair do App
            </button>
        </div>

        <!-- Barra de Navega√ß√£o -->
        <div class="nav-bar shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] z-20">
            <button id="nav-mapa" onclick="window.showScreen('mapa')" class="nav-item text-red-600 font-bold">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>Mapa</span>
            </button>
            <button id="nav-relatar" onclick="window.showScreen('relatar')" class="nav-item text-gray-400">
                <span class="text-3xl bg-red-600 text-white rounded-full w-12 h-12 flex items-center justify-center -mt-8 shadow-lg border-4 border-gray-100">+</span>
                <span class="text-xs mt-1">Relatar</span>
            </button>
            <button id="nav-meus-relatos" onclick="window.showScreen('meus-relatos')" class="nav-item text-gray-400">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M15 12h.01" />
                </svg>
                <span>Hist√≥rico</span>
            </button>
            <button id="nav-perfil" onclick="window.showScreen('perfil')" class="nav-item text-gray-400">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.93 13.93 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm0 0V9a3 3 0 11-6 0v1" />
                </svg>
                <span>Perfil</span>
            </button>
        </div>

        <!-- Toast Notification -->
        <div id="toast-notification" class="hidden fixed bottom-24 left-1/2 -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-full shadow-lg transition-all duration-300 z-50 text-sm font-medium whitespace-nowrap">
            Mensagem
        </div>
    </div>

</body>
</html>